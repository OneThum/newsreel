<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="17" skipped="9" tests="123" time="1.828" timestamp="2025-10-25T20:22:25.909371" hostname="Mac.localdomain"><testcase classname="integration.test_batch_processing.TestBatchSubmission" name="test_batch_creation_from_unsummarized_stories" time="0.004" /><testcase classname="integration.test_batch_processing.TestBatchSubmission" name="test_batch_size_limits" time="0.002" /><testcase classname="integration.test_batch_processing.TestBatchSubmission" name="test_batch_request_format" time="0.000"><failure message="AssertionError: assert 3 == 5&#10; +  where 3 = len([{'custom_id': 'story_1', 'params': {'max_tokens': 300, 'messages': [{'content': 'Summarize story story_1', 'role': 'u...ns': 300, 'messages': [{'content': 'Summarize story story_3', 'role': 'user'}], 'model': 'claude-3-5-haiku-20241022'}}])">E   AssertionError: assert 3 == 5
     +  where 3 = len([{'custom_id': 'story_1', 'params': {'max_tokens': 300, 'messages': [{'content': 'Summarize story story_1', 'role': 'u...ns': 300, 'messages': [{'content': 'Summarize story story_3', 'role': 'user'}], 'model': 'claude-3-5-haiku-20241022'}}])</failure></testcase><testcase classname="integration.test_batch_processing.TestBatchProcessing" name="test_batch_status_polling" time="0.002" /><testcase classname="integration.test_batch_processing.TestBatchProcessing" name="test_batch_completion_detection" time="0.003"><failure message="KeyError: 'succeeded_count'">E   KeyError: 'succeeded_count'</failure></testcase><testcase classname="integration.test_batch_processing.TestBatchProcessing" name="test_batch_result_extraction" time="0.000"><failure message="KeyError: 'message'">E   KeyError: 'message'</failure></testcase><testcase classname="integration.test_batch_processing.TestBatchProcessing" name="test_partial_batch_failure_handling" time="0.000" /><testcase classname="integration.test_batch_processing.TestBatchCostTracking" name="test_batch_cost_calculation" time="0.000"><failure message="AssertionError: assert 'total_cost' in {'id': 'batch_req_123', 'results': [{'custom_id': 'story_1', 'result': {'type': 'succeeded'}}], 'status': 'completed'}">E   AssertionError: assert 'total_cost' in {'id': 'batch_req_123', 'results': [{'custom_id': 'story_1', 'result': {'type': 'succeeded'}}], 'status': 'completed'}</failure></testcase><testcase classname="integration.test_batch_processing.TestBatchCostTracking" name="test_batch_vs_realtime_cost_savings" time="0.000" /><testcase classname="integration.test_batch_processing.TestBatchCostTracking" name="test_monthly_cost_projection" time="0.000" /><testcase classname="integration.test_batch_processing.TestBatchWorkflowEnd2End" name="test_complete_batch_workflow" time="0.002" /><testcase classname="integration.test_batch_processing.TestBatchWorkflowEnd2End" name="test_batch_retry_on_failure" time="0.000" /><testcase classname="integration.test_batch_processing.TestBatchPerformance" name="test_batch_processing_latency" time="0.000" /><testcase classname="integration.test_batch_processing.TestBatchPerformance" name="test_batch_throughput" time="0.000" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsDetection" name="test_verified_to_breaking_transition" time="0.002"><failure message="KeyError: 'first_seen'">E   KeyError: 'first_seen'</failure></testcase><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsDetection" name="test_monitoring_to_breaking_skip_developing" time="0.002" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsDetection" name="test_breaking_news_not_triggered_for_slow_stories" time="0.002" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsNotifications" name="test_notification_triggered_on_breaking_status" time="0.004" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsNotifications" name="test_notification_payload_structure" time="0.000" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsNotifications" name="test_notification_deduplication" time="0.006" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsNotifications" name="test_notification_rate_limiting" time="0.003" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsLifecycle" name="test_breaking_to_verified_demotion" time="0.002"><failure message="KeyError: 'breaking_triggered_at'">E   KeyError: 'breaking_triggered_at'</failure></testcase><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsLifecycle" name="test_verified_to_archived_lifecycle" time="0.002" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsLifecycle" name="test_complete_story_lifecycle_flow" time="0.002" /><testcase classname="integration.test_breaking_news_lifecycle.TestTwitterBreakingNewsIntegration" name="test_twitter_trending_check" time="0.000" /><testcase classname="integration.test_breaking_news_lifecycle.TestTwitterBreakingNewsIntegration" name="test_twitter_volume_threshold" time="0.000" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsPerformance" name="test_breaking_news_detection_latency" time="0.002" /><testcase classname="integration.test_breaking_news_lifecycle.TestBreakingNewsPerformance" name="test_notification_send_latency" time="0.000" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_verified_story_triggers_summarization" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_developing_story_no_summarization" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_summary_prompt_construction" time="0.000" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_summary_stored_in_cluster" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_headline_regeneration_on_source_addition" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestClusteringToSummarizationFlow" name="test_cost_tracking_for_summarization" time="0.000"><failure message="KeyError: 'usage'">E   KeyError: 'usage'</failure></testcase><testcase classname="integration.test_clustering_to_summarization.TestSummarizationWorkflow" name="test_real_time_summarization_flow" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestSummarizationWorkflow" name="test_batch_summarization_flow" time="0.002"><failure message="AssertionError: assert 'anthropic_batch_id' in {'batch_id': 'batch_ant_20251026_001', 'id': 'batch_req_123', 'status': 'submitted', 'story_ids': ['story_1', 'story_2', 'story_3'], ...}">E   AssertionError: assert 'anthropic_batch_id' in {'batch_id': 'batch_ant_20251026_001', 'id': 'batch_req_123', 'status': 'submitted', 'story_ids': ['story_1', 'story_2', 'story_3'], ...}</failure></testcase><testcase classname="integration.test_clustering_to_summarization.TestSummarizationWorkflow" name="test_batch_result_processing" time="0.002"><failure message="AssertionError: assert 1 == 3&#10; +  where 1 = len([{'custom_id': 'story_1', 'result': {'type': 'succeeded'}}])">E   AssertionError: assert 1 == 3
     +  where 1 = len([{'custom_id': 'story_1', 'result': {'type': 'succeeded'}}])</failure></testcase><testcase classname="integration.test_clustering_to_summarization.TestSummarizationWorkflow" name="test_summary_fallback_on_ai_refusal" time="0.002" /><testcase classname="integration.test_clustering_to_summarization.TestSummarizationQuality" name="test_summary_length_validation" time="0.000"><failure message="AssertionError: Summary should have 2-4 sentences&#10;assert 2 &lt;= 0">E   AssertionError: Summary should have 2-4 sentences
    assert 2 &lt;= 0</failure></testcase><testcase classname="integration.test_clustering_to_summarization.TestSummarizationQuality" name="test_summary_includes_key_information" time="0.000" /><testcase classname="integration.test_clustering_to_summarization.TestSummarizationQuality" name="test_summary_prompt_cache_usage" time="0.000" /><testcase classname="integration.test_clustering_to_summarization.TestSummarizationPerformance" name="test_batch_vs_realtime_cost" time="0.000" /><testcase classname="integration.test_clustering_to_summarization.TestSummarizationPerformance" name="test_summarization_rate_limit" time="0.000" /><testcase classname="integration.test_rss_to_clustering.TestRSSToClusteringFlow" name="test_new_article_creates_new_cluster" time="0.002"><failure message="AssertionError: assert 'general' in ['world', 'us', 'tech', 'business', 'sports', 'science', ...]">E   AssertionError: assert 'general' in ['world', 'us', 'tech', 'business', 'sports', 'science', ...]</failure></testcase><testcase classname="integration.test_rss_to_clustering.TestRSSToClusteringFlow" name="test_similar_article_clusters_with_existing" time="0.002"><failure message="AssertionError: Similarity 0.5925925925925926 should be &gt;= 0.7&#10;assert 0.5925925925925926 &gt;= 0.7">E   AssertionError: Similarity 0.5925925925925926 should be &gt;= 0.7
    assert 0.5925925925925926 &gt;= 0.7</failure></testcase><testcase classname="integration.test_rss_to_clustering.TestRSSToClusteringFlow" name="test_duplicate_source_prevented" time="0.002" /><testcase classname="integration.test_rss_to_clustering.TestRSSToClusteringFlow" name="test_cross_category_clustering_prevented" time="0.003"><failure message="AssertionError: Tech and sports should conflict&#10;assert False">E   AssertionError: Tech and sports should conflict
    assert False</failure></testcase><testcase classname="integration.test_rss_to_clustering.TestRSSToClusteringFlow" name="test_entity_based_matching" time="0.002" /><testcase classname="integration.test_rss_to_clustering.TestRSSProcessingPipeline" name="test_full_rss_to_cluster_pipeline" time="0.003" /><testcase classname="integration.test_rss_to_clustering.TestRSSProcessingPipeline" name="test_multiple_articles_same_story" time="0.002"><failure message="AssertionError: Similarity 0.3287671232876712 should indicate same story&#10;assert 0.3287671232876712 &gt;= 0.5">E   AssertionError: Similarity 0.3287671232876712 should indicate same story
    assert 0.3287671232876712 &gt;= 0.5</failure></testcase><testcase classname="integration.test_rss_to_clustering.TestRSSProcessingPipeline" name="test_story_status_progression" time="0.002" /><testcase classname="integration.test_rss_to_clustering.TestRSSFeedQuality" name="test_invalid_feed_handling" time="0.001" /><testcase classname="integration.test_rss_to_clustering.TestRSSFeedQuality" name="test_missing_required_fields" time="0.000" /><testcase classname="integration.test_rss_to_clustering.TestRSSFeedQuality" name="test_html_cleaning_in_pipeline" time="0.000" /><testcase classname="integration.test_rss_to_clustering.TestRSSClusteringPerformance" name="test_clustering_100_articles" time="0.003" /><testcase classname="integration.test_rss_to_clustering.TestRSSClusteringPerformance" name="test_fuzzy_matching_performance" time="0.044" /><testcase classname="system.test_deployed_api.TestDeployedAPI" name="test_api_is_reachable" time="0.251" /><testcase classname="system.test_deployed_api.TestDeployedAPI" name="test_stories_endpoint_returns_data" time="0.429"><failure message="AssertionError: Endpoint returned 403&#10;assert 403 == 200&#10; +  where 403 = &lt;Response [403]&gt;.status_code">E   AssertionError: Endpoint returned 403
    assert 403 == 200
     +  where 403 = &lt;Response [403]&gt;.status_code</failure></testcase><testcase classname="system.test_deployed_api.TestDeployedAPI" name="test_stories_are_recent" time="0.772"><failure message="AssertionError: No stories to check&#10;assert 0 &gt; 0&#10; +  where 0 = len([])">E   AssertionError: No stories to check
    assert 0 &gt; 0
     +  where 0 = len([])</failure></testcase><testcase classname="system.test_deployed_api.TestRSSIngestion" name="test_articles_are_being_ingested" time="0.001"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:92: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestRSSIngestion" name="test_rss_ingestion_rate" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:121: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestRSSIngestion" name="test_multiple_sources_being_ingested" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:149: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestStoryClustering" name="test_stories_are_being_created" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:192: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestStoryClustering" name="test_stories_have_multiple_sources" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:217: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestAISummarization" name="test_summaries_are_being_generated" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:264: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestAISummarization" name="test_summary_coverage_rate" time="0.000"><skipped type="pytest.skip" message="Cosmos credentials not set">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:290: Cosmos credentials not set</skipped></testcase><testcase classname="system.test_deployed_api.TestAzureFunctions" name="test_function_app_is_deployed" time="0.013"><failure message="Failed: ❌ Function App not reachable: HTTPSConnectionPool(host='newsreel-functions.azurewebsites.net', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('&lt;urllib3.connection.HTTPSConnection object at 0x10c897c10&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))">E   socket.gaierror: [Errno 8] nodename nor servname provided, or not known

During handling of the above exception, another exception occurred:
E   urllib3.exceptions.NewConnectionError: &lt;urllib3.connection.HTTPSConnection object at 0x10c897c10&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known

During handling of the above exception, another exception occurred:
E   urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='newsreel-functions.azurewebsites.net', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('&lt;urllib3.connection.HTTPSConnection object at 0x10c897c10&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))

During handling of the above exception, another exception occurred:
E   requests.exceptions.ConnectionError: HTTPSConnectionPool(host='newsreel-functions.azurewebsites.net', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('&lt;urllib3.connection.HTTPSConnection object at 0x10c897c10&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))

During handling of the above exception, another exception occurred:
E   Failed: ❌ Function App not reachable: HTTPSConnectionPool(host='newsreel-functions.azurewebsites.net', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('&lt;urllib3.connection.HTTPSConnection object at 0x10c897c10&gt;: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))</failure></testcase><testcase classname="system.test_deployed_api.TestAzureFunctions" name="test_rss_function_is_running" time="0.000"><skipped type="pytest.skip" message="Requires Application Insights integration">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:357: Requires Application Insights integration</skipped></testcase><testcase classname="system.test_deployed_api.TestAzureFunctions" name="test_clustering_function_is_running" time="0.000"><skipped type="pytest.skip" message="Requires Application Insights integration">/Users/davemac/Library/CloudStorage/OneDrive-OneThumSoftware/One Thum Software/Newsreel/Azure/tests/system/test_deployed_api.py:361: Requires Application Insights integration</skipped></testcase><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_identical_titles_high_similarity" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_very_similar_titles" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_related_but_different_titles" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_unrelated_titles_low_similarity" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_completely_different_titles" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_similarity_with_word_order_change" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_similarity_case_insensitive" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTextSimilarity" name="test_similarity_with_extra_words" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_crime_vs_health_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_politics_vs_sports_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_business_vs_weather_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_same_topic_no_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_no_topic_keywords_no_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_one_topic_vs_none_no_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestTopicConflictDetection" name="test_medical_vs_political_conflict" time="0.000" /><testcase classname="unit.test_clustering_logic.TestClusteringThresholds" name="test_threshold_75_percent" time="0.000" /><testcase classname="unit.test_clustering_logic.TestClusteringThresholds" name="test_edge_cases_near_threshold" time="0.000" /><testcase classname="unit.test_clustering_logic.TestStoryMatching" name="test_exact_match_via_fingerprint" time="0.000" /><testcase classname="unit.test_clustering_logic.TestStoryMatching" name="test_fuzzy_match_required_for_variations" time="0.000" /><testcase classname="unit.test_clustering_logic.TestStoryMatching" name="test_no_match_for_different_events" time="0.000" /><testcase classname="unit.test_clustering_logic.TestDuplicateSourcePrevention" name="test_extract_source_from_article_id" time="0.000" /><testcase classname="unit.test_clustering_logic.TestDuplicateSourcePrevention" name="test_identify_duplicate_sources_in_cluster" time="0.000" /><testcase classname="unit.test_clustering_logic.TestDuplicateSourcePrevention" name="test_unique_sources_only" time="0.000" /><testcase classname="unit.test_clustering_logic.TestClusteringPerformance" name="test_similarity_calculation_is_fast" time="0.001" /><testcase classname="unit.test_clustering_logic.TestClusteringPerformance" name="test_topic_conflict_check_is_fast" time="0.007" /><testcase classname="unit.test_rss_parsing.TestHTMLCleaning" name="test_clean_simple_html" time="0.000" /><testcase classname="unit.test_rss_parsing.TestHTMLCleaning" name="test_clean_nested_html" time="0.000" /><testcase classname="unit.test_rss_parsing.TestHTMLCleaning" name="test_clean_html_entities" time="0.000" /><testcase classname="unit.test_rss_parsing.TestHTMLCleaning" name="test_clean_with_newlines" time="0.000" /><testcase classname="unit.test_rss_parsing.TestHTMLCleaning" name="test_clean_empty_html" time="0.000" /><testcase classname="unit.test_rss_parsing.TestEntityExtraction" name="test_extract_location_entities" time="0.000" /><testcase classname="unit.test_rss_parsing.TestEntityExtraction" name="test_extract_from_empty_text" time="0.000" /><testcase classname="unit.test_rss_parsing.TestEntityExtraction" name="test_extract_with_special_characters" time="0.000" /><testcase classname="unit.test_rss_parsing.TestArticleCategorization" name="test_categorize_tech_article" time="0.000" /><testcase classname="unit.test_rss_parsing.TestArticleCategorization" name="test_categorize_business_article" time="0.000" /><testcase classname="unit.test_rss_parsing.TestArticleCategorization" name="test_categorize_health_article" time="0.000" /><testcase classname="unit.test_rss_parsing.TestArticleCategorization" name="test_categorize_sports_article" time="0.000" /><testcase classname="unit.test_rss_parsing.TestArticleCategorization" name="test_categorize_fallback_to_general" time="0.000" /><testcase classname="unit.test_rss_parsing.TestSpamDetection" name="test_detect_product_spam" time="0.001" /><testcase classname="unit.test_rss_parsing.TestSpamDetection" name="test_detect_sponsored_content" time="0.000" /><testcase classname="unit.test_rss_parsing.TestSpamDetection" name="test_legitimate_article_not_spam" time="0.001" /><testcase classname="unit.test_rss_parsing.TestSpamDetection" name="test_news_about_products_not_spam" time="0.000" /><testcase classname="unit.test_rss_parsing.TestTextTruncation" name="test_truncate_long_text" time="0.000" /><testcase classname="unit.test_rss_parsing.TestTextTruncation" name="test_truncate_short_text_unchanged" time="0.000" /><testcase classname="unit.test_rss_parsing.TestTextTruncation" name="test_truncate_at_word_boundary" time="0.000" /><testcase classname="unit.test_rss_parsing.TestTextTruncation" name="test_truncate_empty_text" time="0.000" /><testcase classname="unit.test_rss_parsing.TestIDGeneration" name="test_generate_article_id" time="0.000" /><testcase classname="unit.test_rss_parsing.TestIDGeneration" name="test_generate_different_ids_for_different_urls" time="0.000" /><testcase classname="unit.test_rss_parsing.TestStoryFingerprinting" name="test_generate_story_fingerprint" time="0.000" /><testcase classname="unit.test_rss_parsing.TestStoryFingerprinting" name="test_fingerprint_consistency" time="0.000" /><testcase classname="unit.test_rss_parsing.TestStoryFingerprinting" name="test_fingerprint_different_for_different_titles" time="0.000" /><testcase classname="unit.test_rss_parsing.TestStoryFingerprinting" name="test_fingerprint_normalizes_case" time="0.000" /><testcase classname="unit.test_rss_parsing.TestDateParsing" name="test_parse_rfc822_date" time="0.000" /><testcase classname="unit.test_rss_parsing.TestDateParsing" name="test_parse_missing_date_returns_now" time="0.001" /></testsuite></testsuites>